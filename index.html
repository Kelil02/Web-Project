<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PLIVM - Dark Mode</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Google Fonts for a modern look -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500&display=swap" rel="stylesheet">
  <style>
    /* Reset and Base Styles */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Roboto', sans-serif;
      background: #121212;
      color: #e0e0e0;
      line-height: 1.6;
      padding: 20px;
      -webkit-font-smoothing: antialiased;
    }
    
    /* Container */
    .container {
      max-width: 960px;
      margin: auto;
      background: #1e1e1e;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
    }
    
    /* Headings */
    h1, h2 {
      color: #bb86fc;
      margin-bottom: 15px;
    }
    
    /* Navigation */
    nav {
      text-align: center;
      margin-bottom: 30px;
    }
    nav a {
      margin: 0 15px;
      text-decoration: none;
      color: #bb86fc;
      font-weight: 500;
      position: relative;
      padding: 8px 0;
      transition: color 0.3s ease;
      display: inline-block; /* so overflow: hidden works well */
      overflow: hidden;      /* needed for ripple effect */
    }
    /* Hover color change */
    nav a:hover {
      color: #03dac6;
    }
    /* Underline animation */
    nav a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      background: #03dac6;
      left: 0;
      bottom: 0;
      transition: width 0.3s ease;
    }
    nav a:hover::after {
      width: 100%;
    }
    /* Ripple effect on click */
    nav a::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(3, 218, 198, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      transition: width 0.6s ease, height 0.6s ease, opacity 0.8s ease;
      pointer-events: none;
    }
    nav a:active::before {
      width: 200px;
      height: 200px;
      opacity: 1;
      transition: 0s;
    }
    
    /* Hero Section */
    .hero {
      position: relative;
      width: 100%;
      height: 400px;
      margin-bottom: 30px;
      overflow: hidden;
      border-radius: 10px;
    }
    .hero-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0.75;
      transition: transform 0.5s ease;
    }
    .hero:hover .hero-image {
      transform: scale(1.05);
    }
    /* Gradient overlay for hero */
    .hero::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(18,18,18,0.6) 0%, rgba(30,30,30,0.6) 100%);
      z-index: 1;
    }
    .hero-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #ffffff;
      text-align: center;
      z-index: 2;
      padding: 0 20px;
    }
    .hero-overlay h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    .hero-overlay p {
      font-size: 1.2rem;
      margin-bottom: 20px;
    }
    .hero-overlay button {
      padding: 12px 25px;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      background: #03dac6;
      color: #121212;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    }
    .hero-overlay button:hover {
      background: #018786;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
    }
    
    /* Section Card Styling */
    section {
      margin: 20px 0;
      padding: 20px;
      border-radius: 10px;
      background: #1e1e1e;
      position: relative;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
      /* Colored edge on the left */
      border-left: 6px solid #03dac6;
    }

    /* Form Styling */
    form {
      margin-bottom: 30px;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: 500;
      color: #e0e0e0;
    }
    input, select, textarea {
      width: 100%;
      padding: 12px;
      margin-top: 8px;
      border: 1px solid #333;
      border-radius: 5px;
      background: #121212;
      color: #e0e0e0;
      transition: border 0.3s ease, box-shadow 0.3s ease;
    }
    input:focus, select:focus, textarea:focus {
      border: 1px solid #03dac6;
      box-shadow: 0 0 8px rgba(3, 218, 198, 0.5);
      outline: none;
    }
    /* Date Picker Icon */
    input[type="date"]::-webkit-calendar-picker-indicator {
      filter: invert(1);
      cursor: pointer;
    }
    
    /* Button Styling */
    button {
      margin-top: 15px;
      padding: 12px 20px;
      background: #03dac6;
      color: #121212;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      position: relative;
      overflow: hidden;
      transition: background 0.3s ease, transform 0.2s ease;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      font-weight: 500;
      letter-spacing: 0.5px;
    }
    button:hover {
      background: #018786;
      transform: translateY(-2px);
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.4);
    }
    button:active {
      transform: translateY(1px);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    button:after {
      content: "";
      background: rgba(255, 255, 255, 0.3);
      display: block;
      position: absolute;
      border-radius: 50%;
      width: 0;
      height: 0;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      transition: width 0.7s, height 0.7s, opacity 0.7s;
    }
    button:active:after {
      width: 200px;
      height: 200px;
      opacity: 1;
      transition: 0s;
    }
    /* Loading and Pulse Animations */
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .loading::before {
      content: "";
      display: inline-block;
      width: 12px;
      height: 12px;
      border: 2px solid transparent;
      border-top-color: #121212;
      border-radius: 50%;
      margin-right: 8px;
      animation: spin 1s linear infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(3, 218, 198, 0.7); }
      70% { box-shadow: 0 0 0 10px rgba(3, 218, 198, 0); }
      100% { box-shadow: 0 0 0 0 rgba(3, 218, 198, 0); }
    }
    button.pulse {
      animation: pulse 1.5s infinite;
    }
    
    /* Table Styling */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 14px;
      text-align: left;
      border-bottom: 1px solid #333;
    }
    th {
      background: #1e1e1e;
      color: #bb86fc;
    }
    tr {
      transition: background-color 0.3s ease;
    }
    tr:hover {
      background-color: #2c2c2c;
    }
    
    /* News Feed */
    .news-feed {
      margin-top: 20px;
      list-style: none;
    }
    .news-feed li {
      padding: 12px;
      border-bottom: 1px solid #333;
      transition: background-color 0.3s ease;
    }
    .news-feed li:hover {
      background-color: #2c2c2c;
    }
    
    /* Chat Section */
    #chatHistory {
      list-style: none;
      margin-top: 10px;
      border: 1px solid #333;
      padding: 15px;
      border-radius: 5px;
      background: #2c2c2c;
      max-height: 200px;
      overflow-y: auto;
    }
    #chatHistory li {
      margin-bottom: 10px;
      border-bottom: 1px solid #444;
      padding-bottom: 6px;
      transition: background-color 0.3s ease;
    }
    #chatHistory li:hover {
      background-color: #383838;
    }
    
    /* Modal Styling */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      justify-content: center;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .modal.active {
      opacity: 1;
    }
    .modal-content {
      background: #1e1e1e;
      padding: 25px;
      border-radius: 10px;
      width: 80%;
      max-width: 500px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.8);
      color: #e0e0e0;
      transform: scale(0.8);
      transition: transform 0.3s ease;
    }
    .modal.active .modal-content {
      transform: scale(1);
    }
    .close-modal {
      float: right;
      font-size: 1.4rem;
      cursor: pointer;
      color: #bb86fc;
      transition: color 0.3s ease, transform 0.3s ease;
    }
    .close-modal:hover {
      color: #03dac6;
      transform: rotate(90deg);
    }
    
    /* Teamwork & Meeting Sections */
    .teamwork-section, .meeting-section {
      max-width: 960px;
      margin: 40px auto;
      text-align: center;
      background: #1e1e1e;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
    }
    .teamwork-section img, .meeting-section img {
      width: 100%;
      max-width: 600px;
      height: auto;
      display: block;
      margin: 20px auto;
      object-fit: cover;
      border-radius: 10px;
    }
    .teamwork-section p, .meeting-section p {
      margin-top: 15px;
      line-height: 1.6;
    }
  </style>
</head>
<body>

  <!-- Hero Section -->
  <header class="hero">
    <img src="images/02ba867e545f953631148c89629412b1.jpg" alt="Business Man" class="hero-image">
    <div class="hero-overlay">
      <h1>PLIVM - Where Passion Meets Results</h1>
      <p>Elevate your daily tasks and collaboration with our modern platform.</p>
    </div>
  </header>
  
  <div class="container">
    <h1>PlIVM</h1>
    
    <!-- Navigation -->
    <nav>
      <a href="#clock-in">Clock In</a>
      <a href="#leave">Leave Request</a>
      <a href="#schedule">Schedule</a>
      <a href="#news">News Feed</a>
      <a href="#chat">Chat</a>
    </nav>
    
    <!-- Clock In Section -->
    <section id="clock-in">
      <h2>Clock In</h2>
      <form id="clockInForm">
        <label for="employeeName">Employee Name:</label>
        <input type="text" id="employeeName" name="employee" required>
        
        <label for="shift">Shift:</label>
        <input type="text" id="shift" name="shift" required placeholder="e.g., Morning">
        
        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>
        
        <button type="submit">Clock In</button>
      </form>
    </section>
    
    <!-- Leave Request Section -->
    <section id="leave">
      <h2>Apply for Leave</h2>
      <form id="leaveForm">
        <label for="employeeLeaveName">Employee Name:</label>
        <input type="text" id="employeeLeaveName" name="employee" required>
        
        <label for="leaveType">Leave Type:</label>
        <select id="leaveType" name="type">
          <option value="sick">Sick</option>
          <option value="vacation">Vacation</option>
        </select>
        
        <label for="startDate">Start Date:</label>
        <input type="date" id="startDate" name="start_date" required>
        
        <label for="endDate">End Date:</label>
        <input type="date" id="endDate" name="end_date" required>
        
        <label for="reason">Reason:</label>
        <textarea id="reason" name="reason" required></textarea>
        
        <button type="submit">Submit Leave Request</button>
      </form>
    </section>
    
    <!-- Schedule Section -->
    <section id="schedule">
      <h2>Schedule</h2>
      <button id="loadSchedule" class="pulse">Load Schedule</button>
      <table id="scheduleTable">
        <thead>
          <tr>
            <th>Employee</th>
            <th>Shift</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody>
          <!-- Schedule data will be populated here -->
        </tbody>
      </table>
    </section>
    
    <!-- News Feed Section -->
    <section id="news">
      <h2>News Feed</h2>
      <ul class="news-feed" id="newsFeed">
        <!-- News feed items will appear here -->
      </ul>
    </section>

    <!-- Chat Section -->
    <section id="chat">
      <h2>Chat</h2>
      <form id="chatForm">
        <label for="chatSender">Sender:</label>
        <input type="text" id="chatSender" name="sender" placeholder="Your Name" required>
        
        <label for="chatRecipient">Recipient:</label>
        <input type="text" id="chatRecipient" name="recipient" placeholder="e.g., Boss or John" required>
        
        <label for="chatMessage">Message:</label>
        <textarea id="chatMessage" name="message" required></textarea>
        
        <button type="submit">Send Message</button>
      </form>
      <button id="loadChatHistory">Load Chat History</button>
      <ul id="chatHistory">
        <!-- Chat messages will appear here -->
      </ul>
    </section>
  </div>
  
  <!-- Modal for Schedule Details -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2>Schedule Details</h2>
      <div id="modalBody">
        <!-- Detailed schedule info goes here -->
      </div>
    </div>
  </div>

  <!-- Teamwork Illustration Section -->
  <section class="teamwork-section">
    <h2>Teamwork &amp; Collaboration</h2>
    <img src="images/Purple Illustration Minimalist Startup Journey Presentation.png" alt="Team Collaboration">
    <p>
      PLIVM is designed to help companies and their employees communicate and stay organized. Use this platform to simplify scheduling, share important updates, and keep track of daily tasks – all in one place..
    </p>
  </section>

  <!-- Meeting Illustration Section -->
  <section class="meeting-section">
    <h2>Engage in Productive Meetings</h2>
    <img src="images/Purple Illustration Minimalist Startup Journey Presentation (1).png" alt="Team Meeting">
    <p>
      Manage your tasks, track progress, and keep everyone in the loop. 
      Enjoy a more productive work environment with PLIVM’s intuitive 
      scheduling and communication tools.
    </p>
  </section>
  
  <script>
    // Modal functionality
    function showModal(content) {
      const modal = document.getElementById('modal');
      document.getElementById('modalBody').innerHTML = content;
      modal.style.display = 'flex';
      // Add a small delay before adding the active class for smooth animation
      setTimeout(() => {
        modal.classList.add('active');
      }, 10);
    }
    
    document.querySelector('.close-modal').addEventListener('click', () => {
      const modal = document.getElementById('modal');
      modal.classList.remove('active');
      // Wait for animation to finish before hiding the modal
      setTimeout(() => {
        modal.style.display = 'none';
      }, 300);
    });
    
    // Button animation functions
    function startButtonLoading(button) {
      const originalText = button.textContent;
      button.classList.add('loading');
      button.disabled = true;
      button.dataset.originalText = originalText;
      button.textContent = 'Processing...';
      return originalText;
    }
    
    function stopButtonLoading(button, originalText) {
      button.classList.remove('loading');
      button.disabled = false;
      button.textContent = originalText || button.dataset.originalText;
    }
    
    // Clock In Form Submission
    document.getElementById('clockInForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const submitButton = this.querySelector('button[type="submit"]');
      const originalText = startButtonLoading(submitButton);
      
      const employee = document.getElementById('employeeName').value;
      const shift = document.getElementById('shift').value;
      const date = document.getElementById('date').value;
      
      fetch('/api/clock-in', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ employee, shift, date })
      })
      .then(response => response.json())
      .then(data => {
        stopButtonLoading(submitButton, originalText);
        alert('Clock In Successful! ID: ' + data.id);
        this.reset();
      })
      .catch(error => {
        console.error('Error:', error);
        stopButtonLoading(submitButton, originalText);
      });
    });
    
    // Leave Request Form Submission
    document.getElementById('leaveForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const submitButton = this.querySelector('button[type="submit"]');
      const originalText = startButtonLoading(submitButton);
      
      const employee = document.getElementById('employeeLeaveName').value;
      const type = document.getElementById('leaveType').value;
      const start_date = document.getElementById('startDate').value;
      const end_date = document.getElementById('endDate').value;
      const reason = document.getElementById('reason').value;
      
      fetch('/api/leave', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ employee, type, start_date, end_date, reason })
      })
      .then(response => response.json())
      .then(data => {
        stopButtonLoading(submitButton, originalText);
        alert('Leave Request Submitted! ID: ' + data.id);
        this.reset();
      })
      .catch(error => {
        console.error('Error:', error);
        stopButtonLoading(submitButton, originalText);
      });
    });
    
    // Load Schedule Data
    document.getElementById('loadSchedule').addEventListener('click', function() {
      const originalText = startButtonLoading(this);
      this.classList.remove('pulse');
      
      fetch('/api/schedule')
      .then(response => response.json())
      .then(data => {
        const tbody = document.querySelector('#scheduleTable tbody');
        tbody.innerHTML = '';
        if (data.schedule.length === 0) {
          tbody.innerHTML = '<tr><td colspan="3">No schedule data available.</td></tr>';
        } else {
          data.schedule.forEach(item => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td>${item.employee}</td><td>${item.shift}</td><td>${item.date}</td>`;
            tr.addEventListener('click', () => {
              showModal(`<p><strong>Employee:</strong> ${item.employee}</p>
                         <p><strong>Shift:</strong> ${item.shift}</p>
                         <p><strong>Date:</strong> ${item.date}</p>`);
            });
            tbody.appendChild(tr);
          });
        }
        stopButtonLoading(this, originalText);
      })
      .catch(error => {
        console.error('Error:', error);
        stopButtonLoading(this, originalText);
      });
    });
    
    // Load News Feed Data on Page Load
    window.addEventListener('load', function() {
      fetch('/api/news')
      .then(response => response.json())
      .then(data => {
        const newsFeed = document.getElementById('newsFeed');
        newsFeed.innerHTML = '';
        data.news.forEach(item => {
          const li = document.createElement('li');
          li.textContent = item;
          newsFeed.appendChild(li);
        });
      })
      .catch(error => console.error('Error:', error));
    });
    
    // Chat Form Submission
    document.getElementById('chatForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const submitButton = this.querySelector('button[type="submit"]');
      const originalText = startButtonLoading(submitButton);
      
      const sender = document.getElementById('chatSender').value;
      const recipient = document.getElementById('chatRecipient').value;
      const message = document.getElementById('chatMessage').value;
      
      fetch('/api/chat', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ sender, recipient, message })
      })
      .then(response => response.json())
      .then(data => {
        stopButtonLoading(submitButton, originalText);
        if (data.success) {
          // Append the sent message to chat history
          const chatHistory = document.getElementById('chatHistory');
          const li = document.createElement('li');
          li.textContent = `From ${sender} to ${recipient}: ${message}`;
          chatHistory.appendChild(li);
          
          this.reset();
        } else {
          alert('Error sending message');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        stopButtonLoading(submitButton, originalText);
      });
    });
    
    // Load Chat History
    document.getElementById('loadChatHistory').addEventListener('click', function() {
      const originalText = startButtonLoading(this);
      
      fetch('/api/chat')
      .then(response => response.json())
      .then(data => {
        const chatHistory = document.getElementById('chatHistory');
        chatHistory.innerHTML = '';
        if (data.chat.length === 0) {
          chatHistory.innerHTML = '<li>No chat messages available.</li>';
        } else {
          data.chat.forEach(item => {
            const li = document.createElement('li');
            li.textContent = `[${new Date(item.timestamp).toLocaleString()}] From ${item.sender} to ${item.recipient}: ${item.message}`;
            chatHistory.appendChild(li);
          });
        }
        stopButtonLoading(this, originalText);
      })
      .catch(error => {
        console.error('Error:', error);
        stopButtonLoading(this, originalText);
      });
    });
  </script>
</body>
</html>
